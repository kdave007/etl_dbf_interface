import{a as N}from"./chunk-SHCVFEKL.js";import{$ as _,B as o,Ca as V,D as w,Da as x,E as v,Ea as E,Fa as k,G as h,Ga as F,Ha as W,I as a,L as n,La as T,M as i,Ma as B,N as u,O as M,P as b,Q as P,Qa as z,Ra as A,Sa as D,Ta as R,U as O,V as d,Va as j,Wa as q,X as y,Xa as G,Ya as H,_ as f,aa as C,ja as S,la as L,mb as U,nb as J,qb as K,rb as Q,sb as X,t as p,ta as I,tb as Y,u as m}from"./chunk-HIEGVO2R.js";function $(s,r){if(s&1){let l=M();n(0,"nb-alert",19),b("close",function(){p(l);let g=P();return m(g.errorMessage="")}),d(1),i()}if(s&2){let l=P();o(),y(" ",l.errorMessage," ")}}function ee(s,r){s&1&&u(0,"nb-icon",20)}function ne(s,r){s&1&&u(0,"nb-icon",21)}var Z=class s{constructor(r,l){this.authService=r;this.router=l;this.authService.isLoggedIn()&&this.router.navigate(["/"])}username="";password="";rememberMe=!1;isLoading=!1;errorMessage="";showPassword=!1;onSubmit(){if(!this.username||!this.password){this.errorMessage="Por favor ingrese usuario y contrase\xF1a";return}this.isLoading=!0,this.errorMessage="",this.authService.login(this.username,this.password).subscribe({next:r=>{r.success?this.router.navigate(["/"]):(this.errorMessage=r.message||"Error al iniciar sesi\xF3n",this.isLoading=!1)},error:r=>{console.error("Login error:",r),this.errorMessage="Error de conexi\xF3n. Por favor intente nuevamente.",this.isLoading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(l){return new(l||s)(w(N),w(I))};static \u0275cmp=v({type:s,selectors:[["app-login"]],decls:30,vars:13,consts:[["loginForm","ngForm"],[1,"login-container"],[1,"login-card-wrapper"],[1,"login-title"],[1,"login-subtitle"],["status","danger","closable","",3,"close",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","username",1,"label"],["nbInput","","fullWidth","","type","text","id","username","name","username","placeholder","Ingrese su usuario","required","","autocomplete","username",3,"ngModelChange","ngModel","disabled"],["for","password",1,"label"],[1,"password-input-wrapper"],["nbInput","","fullWidth","","id","password","name","password","placeholder","Ingrese su contrase\xF1a","required","","autocomplete","current-password",3,"ngModelChange","type","ngModel","disabled"],["type","button","nbButton","","ghost","",1,"password-toggle",3,"click"],[3,"icon"],["name","rememberMe",3,"ngModelChange","ngModel","disabled"],["nbButton","","fullWidth","","status","primary","type","submit",1,"login-button",3,"disabled"],["icon","log-in-outline",4,"ngIf"],["icon","loader-outline","class","spin",4,"ngIf"],["status","danger","closable","",3,"close"],["icon","log-in-outline"],["icon","loader-outline",1,"spin"]],template:function(l,e){if(l&1){let g=M();n(0,"div",1)(1,"div",2)(2,"nb-card")(3,"nb-card-header")(4,"h1",3),d(5,"Iniciar Sesi\xF3n"),i(),n(6,"p",4),d(7,"ETL DBF Interface"),i()(),n(8,"nb-card-body"),h(9,$,2,1,"nb-alert",5),n(10,"form",6,0),b("ngSubmit",function(){return p(g),m(e.onSubmit())}),n(12,"div",7)(13,"label",8),d(14,"Usuario"),i(),n(15,"input",9),C("ngModelChange",function(t){return p(g),_(e.username,t)||(e.username=t),m(t)}),i()(),n(16,"div",7)(17,"label",10),d(18,"Contrase\xF1a"),i(),n(19,"div",11)(20,"input",12),C("ngModelChange",function(t){return p(g),_(e.password,t)||(e.password=t),m(t)}),i(),n(21,"button",13),b("click",function(){return p(g),m(e.togglePasswordVisibility())}),u(22,"nb-icon",14),i()()(),n(23,"div",7)(24,"nb-checkbox",15),C("ngModelChange",function(t){return p(g),_(e.rememberMe,t)||(e.rememberMe=t),m(t)}),d(25," Recordarme "),i()(),n(26,"button",16),h(27,ee,1,0,"nb-icon",17)(28,ne,1,0,"nb-icon",18),d(29),i()()()()()()}if(l&2){let g=O(11);o(9),a("ngIf",e.errorMessage),o(6),f("ngModel",e.username),a("disabled",e.isLoading),o(5),a("type",e.showPassword?"text":"password"),f("ngModel",e.password),a("disabled",e.isLoading),o(2),a("icon",e.showPassword?"eye-off-outline":"eye-outline"),o(2),f("ngModel",e.rememberMe),a("disabled",e.isLoading),o(2),a("disabled",e.isLoading||!g.valid),o(),a("ngIf",!e.isLoading),o(),a("ngIf",e.isLoading),o(),y(" ",e.isLoading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," ")}},dependencies:[L,S,B,W,V,x,E,T,F,k,q,j,R,D,Y,X,H,G,Q,K,A,z,J,U],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}.login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;width:100%;background:linear-gradient(135deg,#1a1a2e,#16213e);padding:1rem}.login-card-wrapper[_ngcontent-%COMP%]{width:100%;max-width:450px}.login-card-wrapper[_ngcontent-%COMP%]   nb-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 8px 24px #0000004d}.login-card-wrapper[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{text-align:center;padding:2rem 1.5rem 1.5rem;border-bottom:1px solid rgba(255,255,255,.1)}.login-card-wrapper[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.75rem;font-weight:600;color:#fff}.login-card-wrapper[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#fff9}.login-card-wrapper[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:2rem 1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;color:#fffc}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:.9375rem}.password-input-wrapper[_ngcontent-%COMP%]{position:relative}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:3rem}.password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:0;top:0;height:100%;padding:0 .75rem;border:none;background:transparent}.password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1.25rem}.login-button[_ngcontent-%COMP%]{margin-top:1rem;height:3rem;font-size:1rem;font-weight:600}.login-button[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{margin-right:.5rem}.login-button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.6}nb-alert[_ngcontent-%COMP%]{margin-bottom:1.5rem}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};export{Z as LoginComponent};
