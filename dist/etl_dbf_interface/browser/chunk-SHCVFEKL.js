import{g as i,l as s,n as a,oa as u,p as n,ta as l}from"./chunk-HIEGVO2R.js";var c={production:!1,apiUrl:"http://192.168.10.43:3001"};var g=class o{constructor(t,e){this.http=t;this.router=e}currentUserSubject=new i(this.getUserFromStorage());currentUser$=this.currentUserSubject.asObservable();TOKEN_KEY="auth_token";USER_KEY="auth_user";login(t,e){let p=`${c.apiUrl}/api/auth/login`,m={username:t,password:e};return this.http.post(p,m).pipe(s(r=>{r.success&&r.token&&this.setSession(r.token,r.user)}))}logout(){localStorage.removeItem(this.TOKEN_KEY),localStorage.removeItem(this.USER_KEY),this.currentUserSubject.next(null),this.router.navigate(["/login"])}isLoggedIn(){return!!this.getToken()}getToken(){return localStorage.getItem(this.TOKEN_KEY)}getCurrentUser(){return this.currentUserSubject.value}setSession(t,e){localStorage.setItem(this.TOKEN_KEY,t),e&&(localStorage.setItem(this.USER_KEY,JSON.stringify(e)),this.currentUserSubject.next(e))}getUserFromStorage(){let t=localStorage.getItem(this.USER_KEY);if(t)try{return JSON.parse(t)}catch{return null}return null}static \u0275fac=function(e){return new(e||o)(n(u),n(l))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{g as a};
