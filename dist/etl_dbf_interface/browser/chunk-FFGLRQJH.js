import{a as k}from"./chunk-R2G55BTQ.js";import{a as N}from"./chunk-D7B2MET4.js";import{a as T}from"./chunk-PCI3NK2F.js";import{$ as f,B as s,E as b,G as p,I as d,L as e,M as n,N as S,P as g,Q as u,Qa as D,Ra as x,Sa as E,Ta as w,V as o,Va as I,W as l,Wa as B,X as C,_ as P,aa as _,ca as y,da as h,ha as M,ia as O,ka as z,la as v}from"./chunk-HIEGVO2R.js";function R(c,t){if(c&1&&(e(0,"tr",7)(1,"td",8),o(2),n(),e(3,"td",9),o(4),n()()),c&2){let a=t.$implicit;s(2),l(a.city),s(2),l(a.total)}}function A(c,t){if(c&1&&(e(0,"tr",7)(1,"td",10),o(2),n(),e(3,"td",9),o(4),y(5,"number"),n(),e(6,"td"),o(7),n(),e(8,"td",9),o(9),n(),e(10,"td")(11,"span",11),S(12,"nb-icon",12),o(13),n()()()),c&2){let a=t.$implicit,i=u();s(2),l(a.name),s(2),l(h(5,7,a.records)),s(3),l(a.lastUpdate),s(2),l(a.sizeMB),s(2),d("ngClass",i.getDbStatusClass(a.status)),s(),d("icon",i.getDbStatusIcon(a.status)),s(),C(" ",a.status," ")}}var F=class c{selectedPlaza="Xalapa";citySyncStats=[];filteredCitySyncStats=[];paginatedCitySyncStats=[];databaseStats=[];filteredDatabaseStats=[];paginatedDatabaseStats=[];syncStatsPage=1;syncStatsPageSize=5;dbStatsPage=1;dbStatsPageSize=5;ngOnInit(){this.citySyncStats=[{city:"Xalapa",total:8,connected:6,disconnected:1,errors:1,connectivity:75},{city:"Guadalajara",total:12,connected:10,disconnected:2,errors:0,connectivity:83},{city:"Hermosillo",total:6,connected:5,disconnected:0,errors:1,connectivity:83}],this.databaseStats=[{name:"SALES_DB",records:125430,lastUpdate:"2026-01-07 13:05:00",sizeMB:245.8,status:"Activa"},{name:"INVENTORY_DB",records:89234,lastUpdate:"2026-01-07 13:03:00",sizeMB:178.3,status:"Activa"},{name:"ORDERS_DB",records:234567,lastUpdate:"2026-01-07 12:45:00",sizeMB:412.6,status:"Sincronizando"},{name:"CUSTOMERS_DB",records:45678,lastUpdate:"2026-01-07 11:30:00",sizeMB:98.4,status:"Error"},{name:"PRODUCTS_DB",records:156789,lastUpdate:"2026-01-07 13:07:00",sizeMB:289.1,status:"Activa"}],this.applyFilters()}onPlazaChange(t){this.selectedPlaza=t,this.applyFilters()}applyFilters(){this.filteredCitySyncStats=this.citySyncStats.filter(t=>t.city===this.selectedPlaza),this.filteredDatabaseStats=[...this.databaseStats],this.updateSyncStatsPagination(),this.updateDbStatsPagination()}updateSyncStatsPagination(){let t=(this.syncStatsPage-1)*this.syncStatsPageSize,a=t+this.syncStatsPageSize;this.paginatedCitySyncStats=this.filteredCitySyncStats.slice(t,a)}updateDbStatsPagination(){let t=(this.dbStatsPage-1)*this.dbStatsPageSize,a=t+this.dbStatsPageSize;this.paginatedDatabaseStats=this.filteredDatabaseStats.slice(t,a)}onSyncStatsPageChange(t){this.syncStatsPage=t,this.updateSyncStatsPagination()}onDbStatsPageChange(t){this.dbStatsPage=t,this.updateDbStatsPagination()}getConnectivityClass(t){return t>=80?"connectivity-good":t>=60?"connectivity-medium":"connectivity-low"}getDbStatusClass(t){switch(t){case"Activa":return"status-active";case"Sincronizando":return"status-syncing";case"Error":return"status-error";default:return""}}getDbStatusIcon(t){switch(t){case"Activa":return"checkmark-circle-outline";case"Sincronizando":return"sync-outline";case"Error":return"alert-triangle-outline";default:return"question-mark-circle-outline"}}static \u0275fac=function(a){return new(a||c)};static \u0275cmp=b({type:c,selectors:[["app-statistics"]],decls:40,vars:9,consts:[[3,"selectedPlazaChange","selectedPlaza"],[1,"statistics-container"],[1,"stats-card"],[1,"table-container"],[1,"stats-table"],["class","table-row",4,"ngFor","ngForOf"],[3,"pageChange","currentPage","pageSize","totalRecords"],[1,"table-row"],[1,"city-name"],[1,"text-center"],[1,"db-name"],[1,"status-badge",3,"ngClass"],[3,"icon"]],template:function(a,i){a&1&&(e(0,"app-plaza-selector",0),_("selectedPlazaChange",function(r){return f(i.selectedPlaza,r)||(i.selectedPlaza=r),r}),g("selectedPlazaChange",function(r){return i.onPlazaChange(r)}),n(),e(1,"div",1)(2,"nb-card",2)(3,"nb-card-header")(4,"h5"),o(5,"Resumen de Sincronizaci\xF3n por Plaza"),n()(),e(6,"nb-card-body")(7,"div",3)(8,"table",4)(9,"thead")(10,"tr")(11,"th"),o(12,"Sucursal"),n(),e(13,"th"),o(14,"Total registros"),n()()(),e(15,"tbody"),p(16,R,5,2,"tr",5),n()()(),e(17,"app-table-pagination",6),g("pageChange",function(r){return i.onSyncStatsPageChange(r)}),n()()(),e(18,"nb-card",2)(19,"nb-card-header")(20,"h5"),o(21,"Estad\xEDsticas de Bases de Datos"),n()(),e(22,"nb-card-body")(23,"div",3)(24,"table",4)(25,"thead")(26,"tr")(27,"th"),o(28,"Base de Datos"),n(),e(29,"th"),o(30,"Registros Totales"),n(),e(31,"th"),o(32,"\xDAltima Actualizaci\xF3n"),n(),e(33,"th"),o(34,"Tama\xF1o (MB)"),n(),e(35,"th"),o(36,"Estado"),n()()(),e(37,"tbody"),p(38,A,14,9,"tr",5),n()()(),e(39,"app-table-pagination",6),g("pageChange",function(r){return i.onDbStatsPageChange(r)}),n()()()()),a&2&&(P("selectedPlaza",i.selectedPlaza),s(16),d("ngForOf",i.paginatedCitySyncStats),s(),d("currentPage",i.syncStatsPage)("pageSize",i.syncStatsPageSize)("totalRecords",i.filteredCitySyncStats.length),s(21),d("ngForOf",i.paginatedDatabaseStats),s(),d("currentPage",i.dbStatsPage)("pageSize",i.dbStatsPageSize)("totalRecords",i.filteredDatabaseStats.length))},dependencies:[v,M,O,z,B,I,w,E,x,D,N,T,k],styles:[".statistics-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.stats-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0;font-weight:600;color:#fff}.stats-card[_ngcontent-%COMP%]   nb-card-body[_ngcontent-%COMP%]{padding:0}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.stats-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.stats-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#598bff26;border-bottom:2px solid rgba(89,139,255,.3)}.stats-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;font-weight:600;color:#fff;font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.stats-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th.text-center[_ngcontent-%COMP%]{text-align:center}.stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.1);transition:background-color .2s ease}.stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#ffffff0d}.stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#fff;font-size:.875rem}.stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.text-center[_ngcontent-%COMP%]{text-align:center}.stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.city-name[_ngcontent-%COMP%], .stats-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   td.db-name[_ngcontent-%COMP%]{font-weight:600;color:#598bff}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:2rem;padding:.25rem .5rem;border-radius:.5rem;font-size:.75rem;font-weight:600}.badge.badge-success[_ngcontent-%COMP%]{background-color:#00d68f33;color:#00d68f}.badge.badge-warning[_ngcontent-%COMP%]{background-color:#fa03;color:#fa0}.badge.badge-error[_ngcontent-%COMP%]{background-color:#ff3d7133;color:#ff3d71}.connectivity-percent[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.connectivity-percent.connectivity-good[_ngcontent-%COMP%]{color:#00d68f}.connectivity-percent.connectivity-medium[_ngcontent-%COMP%]{color:#fa0}.connectivity-percent.connectivity-low[_ngcontent-%COMP%]{color:#ff3d71}.status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.25rem .75rem;border-radius:1rem;font-size:.75rem;font-weight:600}.status-badge[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:1rem}.status-badge.status-active[_ngcontent-%COMP%]{background-color:#00d68f33;color:#00d68f}.status-badge.status-active[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:#00d68f}.status-badge.status-syncing[_ngcontent-%COMP%]{background-color:#598bff33;color:#598bff}.status-badge.status-syncing[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:#598bff}.status-badge.status-error[_ngcontent-%COMP%]{background-color:#ff3d7133;color:#ff3d71}.status-badge.status-error[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{color:#ff3d71}"]})};export{F as StatisticsComponent};
